!function(a){a.fn.idleTimeout=function(b){var f,g,h,i,c={idleTimeLimit:1200,redirectUrl:"/logout",customCallback:!1,activityEvents:"click keypress scroll wheel mousewheel mousemove",enableAlert:!0,alertDisplayLimit:180,alertTitle:"Session Expiration Warning",alertMessage:'You will be logged off in <span id="countdownDisplay">\x3c!-- countdown place holder --\x3e</span> due to inactivity. Click anywhere to continue using Eureka!',sessionKeepAliveTimer:600},d=a.extend(c,b),e=2,f={setItem:function(a,b){localStorage.setItem(a,JSON.stringify(b))},getItem:function(a){return JSON.parse(localStorage.getItem(a))}},g=function(){var b=null;return checkTimeout=function(){var b=a.now(),c=j.getLast()+1e3*d.idleTimeLimit,e=c-1e3*d.alertDisplayLimit,f=i.isOpen();b>c||h.isLoggedOut()?h.logoutUser():d.enableAlert&&(b>e?f||i.open():f&&i.close())},{init:function(){h.init(),b=setInterval(checkTimeout,1e3*e),j.init()}}}(),j=function(){var b=null,c=null,e=null,g=window.location.href,h=null,i=function(a){h=a,f.setItem("idleTimerLastActivity",a)},j=function(){return f.getItem("idleTimerLastActivity")},k=function(){h===j()&&a.get(g)},l=function(){e=setInterval(k,1e3*d.sessionKeepAliveTimer)},m=function(){b&&(i(b),b=null)};return{init:function(){a("body").on(d.activityEvents,function(){b=a.now()}),i(a.now()),c=setInterval(m,1e3),d.sessionKeepAliveTimer&&l()},restart:function(){clearInterval(e),k(),l()},getLast:j}}(),i=function(){var b=null,c=null,e=document.title;return startCountdownDisplay=function(){var b=a("#countdownDisplay");if(b){var e=j.getLast()+1e3*d.idleTimeLimit,f=function(){var c=Math.max((e-a.now())/1e3,0),d=Math.floor(c/60);d<10&&(d="0"+d);var f=Math.floor(c-60*d);f<10&&(f="0"+f),b.html(d+":"+f)};f(),c=setInterval(f,1e3)}},{open:function(){b=a.bootbar.warning(d.alertMessage,{autoDismiss:!1,onDismiss:function(){clearInterval(c)}}),startCountdownDisplay(),document.title=d.alertTitle},isOpen:function(){return!!b},close:function(){b.close(),b=null,document.title=e}}}(),h={init:function(){f.setItem("idleTimerLoggedOut",!1),a(".idletimeout-logout").click(function(){f.setItem("idleTimerLoggedOut",!0)})},isLoggedOut:function(){return f.getItem("idleTimerLoggedOut")},logoutUser:function(){f.setItem("idleTimerLoggedOut",!0),d.customCallback&&d.customCallback(),d.redirectUrl&&(window.location.href=d.redirectUrl)}};return this.each(function(){g.init()})}}(jQuery);
